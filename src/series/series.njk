---
pagination:
  data: collections.seriesCollection
  size: 1
  alias: seriesItem
permalink: "series/{{ seriesItem.id | lower }}/index.html"
---

<h1>{{ seriesItem.name }}</h1>
<p>{{ seriesItem.description }}</p>

{% from "macros/compare-table.njk" import compareTable %}

{# Show ranks (from src/_data/series.yml) with a header and list of chip ids #}
{% if seriesItem.ranks %}
  {% for rank in seriesItem.ranks %}
    <h2>{{ rank.name }}</h2>
    {% if rank.description %}
      <p>{{ rank.description }}</p>
    {% endif %}
    <ul>
      {% if rank.variants and rank.variants | length > 0 %}
        {# Build items from chip ids and call compareTable to render a comparison table for the variants #}
        {% set items = getChips(rank.variants, collections) %}
        {{ compareTable(items) }}
      {% else %}
        <li>No chips available</li>
      {% endif %}
    </ul>
  {% endfor %}
{% endif %}